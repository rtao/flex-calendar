!function(){"use strict";function e(e){e.translations("en",{JANUARY:"January",FEBRUARY:"February",MARCH:"March",APRIL:"April",MAI:"Mai",JUNE:"June",JULY:"July",AUGUST:"August",SEPTEMBER:"September",OCTOBER:"October",NOVEMBER:"November",DECEMBER:"December",SUNDAY:"Sunday",MONDAY:"Monday",TUESDAY:"Tuesday",WEDNESDAY:"Wednesday",THURSDAY:"Thurday",FRIDAY:"Friday",SATURDAY:"Saturday"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("escape")}function t(){var e='<div class="flex-calendar"><div class="month"><div class="arrow {{arrowPrevClass}}" ng-click="prevMonth()"></div><div class="label" ng-click="pickMonth()">{{ selectedMonth | translate }} {{selectedYear}}</div><div class="arrow {{arrowNextClass}}" ng-click="nextMonth()"></div></div><div class="week"><div class="day" ng-repeat="day in weekDays(options.dayNamesLength) track by $index">{{ day }}</div></div><div class="days" ng-repeat="week in weeks"><div class="day"ng-repeat="day in week track by $index"ng-class="[getDayClass(day), {selected: isDefaultDate(day), event: day.event[0], disabled: day.disabled, out: !day}]"ng-click="onClick(day, $index, $event)"><div class="number">{{day.day}}</div></div></div></div>',t={restrict:"E",scope:{options:"=?",events:"=?"},template:e,controller:a};return t}function a(e,t,a,n){function o(){e.options.disabledDates&&(e.mappedDisabledDates=e.options.disabledDates.map(function(e){return new Date(e)}))}function s(){e.mappedEvents=e.events.map(function(e){return e.date=new Date(e.date),e})}function i(){var t=e.options.prevMonthEvent||"flexcalendar:prevMonthEvent";e.$on(t,g);var a=e.options.nextMonthEvent||"flexcalendar:nextMonthEvent";e.$on(a,y)}function l(){n.$broadcast("$flexCalendar.MonthClicked")}function d(t,a,n){t&&!t.disabled&&(e.options.defaultDate=t.date,t.event.length&&e.options.eventClick&&e.options.eventClick(t,n),e.options.dateClick(t,n))}function r(t){t&&e.mappedEvents&&(t.event=[],e.mappedEvents.forEach(function(e){t.date.getFullYear()===e.date.getFullYear()&&t.date.getMonth()===e.date.getMonth()&&t.date.getDate()===e.date.getDate()&&t.event.push(e)}))}function c(t){if(!e.options.minDate&&!e.options.maxDate)return!0;var a=t.date;return!(e.options.minDate&&a<e.options.minDate)&&!(e.options.maxDate&&a>e.options.maxDate)}function u(t){if(!e.mappedDisabledDates)return!1;for(var a=0;a<e.mappedDisabledDates.length;a++)if(t.year===e.mappedDisabledDates[a].getFullYear()&&t.month===e.mappedDisabledDates[a].getMonth()&&t.day===e.mappedDisabledDates[a].getDate())return!0}function p(){var t=null,a=null;if(!e.options.minDate)return!0;var n=E.indexOf(e.selectedMonth);return 0===n?(t=e.selectedYear-1,a=11):(t=e.selectedYear,a=n-1),!(t<e.options.minDate.getFullYear())&&!(t===e.options.minDate.getFullYear()&&a<e.options.minDate.getMonth())}function D(){var t=null,a=null;if(!e.options.maxDate)return!0;var n=E.indexOf(e.selectedMonth);return 11===n?(t=e.selectedYear+1,a=0):(t=e.selectedYear,a=n+1),!(t>e.options.maxDate.getFullYear())&&!(t===e.options.maxDate.getFullYear()&&a>e.options.maxDate.getMonth())}function f(){e.weeks=[];for(var t=null,a=new Date(e.selectedYear,E.indexOf(e.selectedMonth)+1,0).getDate(),n=1;n<a+1;n+=1){var o=new Date(e.selectedYear,E.indexOf(e.selectedMonth),n),s=new Date(e.selectedYear,E.indexOf(e.selectedMonth),n).getDay();e.options.mondayIsFirstDay&&(s=(s+6)%7),t=t||[null,null,null,null,null,null,null],t[s]={year:e.selectedYear,month:E.indexOf(e.selectedMonth),day:n,date:o,_month:o.getMonth()+1},c(t[s])?e.mappedEvents&&r(t[s]):t[s].disabled=!0,t[s]&&u(t[s])&&(t[s].disabled=!0),6!==s&&n!==a||(e.weeks.push(t),t=void 0)}e.allowedPrevMonth()?e.arrowPrevClass="visible":e.arrowPrevClass="hidden",e.allowedNextMonth()?e.arrowNextClass="visible":e.arrowNextClass="hidden"}function v(){e.options.defaultDate?e.options._defaultDate=new Date(e.options.defaultDate):e.options._defaultDate=new Date,e.selectedYear=e.options._defaultDate.getFullYear(),e.selectedMonth=E[e.options._defaultDate.getMonth()],e.selectedDay=e.options._defaultDate.getDate()}function h(){if(e.mappedDisabledDates&&0!==e.mappedDisabledDates.length){for(var t=0;t<e.mappedDisabledDates.length;t++)e.mappedDisabledDates[t]=new Date(e.mappedDisabledDates[t]);f()}}function m(e){return w.map(function(t){return Y(t).slice(0,e)})}function M(t){if(t){var a=t.year===e.options._defaultDate.getFullYear()&&t.month===e.options._defaultDate.getMonth()&&t.day===e.options._defaultDate.getDate();return a}}function g(){if(e.allowedPrevMonth()){var t=E.indexOf(e.selectedMonth);0===t?(e.selectedYear-=1,e.selectedMonth=E[11]):e.selectedMonth=E[t-1];var a={name:e.selectedMonth,index:t-1,_index:t+2};e.options.changeMonth(a,e.selectedYear)}}function y(){if(e.allowedNextMonth()){var t=E.indexOf(e.selectedMonth);11===t?(e.selectedYear+=1,e.selectedMonth=E[0]):e.selectedMonth=E[t+1];var a={name:e.selectedMonth,index:t+1,_index:t+2};e.options.changeMonth(a,e.selectedYear)}}function x(e){return e&&e.event&&0!==e.event.length?e.event.map(function(e){return e.eventClass||""}).join(" "):""}e.days=[],e.options=e.options||{},e.events=e.events||[],e.options.dayNamesLength=e.options.dayNamesLength||1,e.options.mondayIsFirstDay=e.options.mondayIsFirstDay||!1,e.onClick=d,e.allowedPrevMonth=p,e.allowedNextMonth=D,e.weekDays=m,e.isDefaultDate=M,e.prevMonth=g,e.nextMonth=y,e.pickMonth=l,e.getDayClass=x,e.arrowPrevClass="visible",e.arrowNextClass="visible";var Y=t("translate"),E=["JANUARY","FEBRUARY","MARCH","APRIL","MAI","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],w=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];if(e.options.mondayIsFirstDay){var b=w.shift();w.push(b)}e.options.minDate&&(e.options.minDate=new Date(e.options.minDate)),e.options.maxDate&&(e.options.maxDate=new Date(e.options.maxDate)),e.options.disabledDates&&o(),e.events&&s(),i(),e.$watch("options.defaultDate",function(){v()}),e.$watch("options.disabledDates",function(){e.options.disabledDates&&(o(),h())}),e.$watchCollection("events",function(){s(),f()}),e.$watch("weeks",function(t){var a=[];angular.forEach(t,function(e){angular.forEach(e,function(e){e&&e.event&&angular.forEach(e.event,function(e){a.push(e)})})}),"function"==typeof e.options.filteredEventsChange&&e.options.filteredEventsChange(a)}),e.$watch("selectedYear",function(e,t){e!==t&&f()}),e.$watch("selectedMonth",function(e,t){e!==t&&f()})}angular.module("flexcalendar",["pascalprecht.translate"]).directive("flexCalendar",t),angular.module("flexcalendar.defaultTranslation",["flexcalendar"]).config(e);e.$inject=["$translateProvider"],a.$inject=["$scope","$filter","$rootScope"]}();